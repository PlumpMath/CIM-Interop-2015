<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="Task" />
  <meta>
    <lastUpdated value="2015-04-02T14:21:09.718+02:00" />
  </meta>
  <url value="http://cim-api.endeavourhealth.org/fhir/Task" />
  <version value="0.1" />
  <name value="Task" />
  <display value="Task" />
  <status value="draft" />
  <experimental value="false" />
  <publisher value="Endeavour" />
  <date value="2015-04-02T14:21:09+02:00" />
  <description value="Base StructureDefinition for Task Resource which can be used to communicate tasks between systems" />
  <requirements value="Allow the communication of tasks between systems" />
  <mapping>
    <identity value="rim" />
    <uri value="http://hl7.org/v3" />
    <name value="RIM" />
  </mapping>
  <mapping>
    <identity value="v2" />
    <uri value="http://hl7.org/v2" />
    <name value="HL7 v2" />
  </mapping>
  <kind value="resource" />
  <constrainedType value="Order" />
  <abstract value="false" />
  <base value="http://hl7.org/fhir/StructureDefinition/Order" />
  <differential>
    <element>
      <path value="Order.extension" />
      <slicing>
        <discriminator value="url" />
        <rules value="openAtEnd" />
      </slicing>
    </element>
    <element>
      <path value="Order.extension" />
      <name value="type" />
      <label value="Type" />
      <short value="BookAppointment | TelephonePatient | ScreenMessage | ResultsForInfo | MeetingNotification | PatientNote | AdminNote | FormToComplete | RepeatTest | EscalationNotification | ConfidentialityOverridden | TransmissionFailure | TransmissionReport | LegitimateRelationshipNotification | OverdueTaskNotification | Other" />
      <definition value="Task type" />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="code" />
      </type>
      <exampleCode value="adminNote" />
      <binding>
        <strength value="required" />
        <valueSetReference>
          <reference value="http://cim-api.endeavourhealth.org/fhir/ValueSet/task-type" />
        </valueSetReference>
      </binding>
    </element>
    <element>
      <path value="Order.extension" />
      <name value="priority" />
      <label value="Priority" />
      <short value="Low | Medium | High" />
      <definition value="Task Priority" />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="code" />
      </type>
      <exampleCode value="medium" />
      <binding>
        <strength value="required" />
        <valueSetReference>
          <reference value="http://cim-api.endeavourhealth.org/fhir/ValueSet/task-priority" />
        </valueSetReference>
      </binding>
    </element>
    <element>
      <path value="Order.extension" />
      <name value="status" />
      <label value="Status" />
      <short value="Active | Complete | Deleted | Archived" />
      <definition value="Task status" />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="code" />
      </type>
      <exampleCode value="active" />
      <binding>
        <strength value="required" />
        <valueSetReference>
          <reference value="http://cim-api.endeavourhealth.org/fhir/ValueSet/task-status" />
        </valueSetReference>
      </binding>
    </element>
    <element>
      <path value="Order.date" />
      <name value="Creation Date" />
      <label value="Creation Date" />
      <short value="When the task was created" />
      <definition value="When the task was created" />
      <min value="0" />
      <max value="1" />
      <type>
        <code value="dateTime" />
      </type>
      <exampleDateTime value="2015-10-05T00:00:00+01:00" />
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="ORC-9" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value=".participation[typeCode=AUT].time" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="when.done" />
      </mapping>
    </element>
    <element>
      <path value="Order.subject" />
      <name value="Patient" />
      <label value="Patient" />
      <short value="Patient this task is about" />
      <definition value="Patient this task is about." />
      <comments value="May be left blank if the task is not associated with a patient." />
      <alias value="Patient" />
      <min value="0" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Patient" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="PID-3" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value=".participation[typeCode=SBJ].role[classCode=PAT]" />
      </mapping>
    </element>
    <element>
      <path value="Order.source" />
      <name value="Created By" />
      <label value="Created By" />
      <short value="Who created the task" />
      <definition value="Who created the task" />
      <alias value="Author" />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Practitioner" />
      </type>
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Organization" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="ORC-12 / OBR-16 / RXO-14 / RXE-13 / PRT-5 (PRT-4-Participation='OP')" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value=".participation[typeCode=AUT].role" />
      </mapping>
    </element>
    <element>
      <path value="Order.target" />
      <short value="Who is intended to action the task" />
      <definition value="Who is intended to action the task" />
      <min value="0" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Organization" />
      </type>
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Practitioner" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="Unclear: MSH-5 / IPC-7 / BPO-8 / RXO-32 / RXE-40 / RXD-30 / RXG-11 / RXG-27 / PRT-8 (PRT-4-participation in { 'AP', 'DP', 'PO', 'RT' })" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value=".participation[typeCode=PFM].role" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="who.actor" />
      </mapping>
    </element>
    <element>
      <path value="Order.reason[x]" />
      <name value="Title" />
      <label value="Title" />
      <short value="Task title" />
      <definition value="Task title/subject/reason" />
      <alias value="Subject" />
      <min value="0" />
      <max value="1" />
      <type>
        <code value="CodeableConcept" />
      </type>
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Resource" />
      </type>
      <isSummary value="true" />
      <binding>
        <strength value="example" />
        <description value="Indicates the reason for seeking fulfillment of the task." />
      </binding>
      <mapping>
        <identity value="v2" />
        <map value="ORC-16.2 / OBR-31.2 / BPO-13.2-BP / RXO-20.2 / RXE-27.2 / RXD-21.2 / RXG-22.2 / RXA-19.2" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value=".reasonCode or .outboundRelationship[typeCode=RSON].target" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="why" />
      </mapping>
    </element>
    <element>
      <path value="Order.when.code" />
      <short value="Code specifies when request should be done. The code may simply be a priority code" />
      <definition value="Code specifies when request should be done. The code may simply be a priority code." />
      <comments value="This is usually a local code agreed in the context of the ordering workflow." />
      <min value="0" />
      <max value="0" />
      <type>
        <code value="CodeableConcept" />
      </type>
      <condition value="ord-1" />
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="GTS is a coded value" />
      </mapping>
    </element>
    <element>
      <path value="Order.when.schedule.event" />
      <name value="Action By" />
      <label value="Action By" />
      <short value="The date by which the task should be actioned" />
      <definition value="The date by which the task should be actioned" />
      <min value="0" />
      <max value="*" />
      <type>
        <code value="dateTime" />
      </type>
      <exampleDateTime value="2015-10-12T00:00:00+01:00" />
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="QLIST&lt;TS&gt;" />
      </mapping>
    </element>
    <element>
      <path value="Order.when.schedule.repeat" />
      <short value="When the event is to occur" />
      <definition value="A set of rules that describe when the event should occur." />
      <requirements value="Many timing schedules are determined by regular repetitions." />
      <min value="0" />
      <max value="0" />
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="Implies PIVL or EIVL" />
      </mapping>
    </element>
    <element>
      <path value="Order.when.schedule.code" />
      <short value="QD | QOD | Q4H | Q6H | BID | TID | QID | AM | PM +" />
      <definition value="A code for the timing pattern. Some codes such as BID are ubiquitous, but many institutions define their own additional codes." />
      <comments value="A repeat should always be defined except for the common codes BID, TID, QID, AM and PM, which all systems are required to understand." />
      <min value="0" />
      <max value="0" />
      <type>
        <code value="CodeableConcept" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value="QSC.code" />
      </mapping>
    </element>
    <element>
      <path value="Order.detail" />
      <name value="Description" />
      <label value="Description" />
      <short value="Description of the task to be performed" />
      <definition value="Description of the task to be performed" />
      <min value="1" />
      <max value="*" />
      <type>
        <code value="Reference" />
        <profile value="http://hl7.org/fhir/StructureDefinition/Resource" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="rim" />
        <map value=".outboundRelationship[typeCode=SUBJ].target" />
      </mapping>
    </element>
  </differential>
</StructureDefinition>